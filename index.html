<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    >
    <title>Document</title>
</head>
<body>
    <form>
                    
        <label for="keywords">Search for a Recipe:</label>
        <input type="text" class="form-control" id="keywords" placeholder="Enter Meal Here">
      
      <button class="btn btn-primary btn-search">Submit</button>
      
      <label for="keywords">Search for a Restaurant:</label>
        
      <input type="text" class="form-control" id="restaurant" placeholder="Enter Location Here">
      
      <input type="text" class="form-control" id="foodType" placeholder="Enter type of food here">
      <button class="btn btn-primary btn-food">Submit</button>
  </form>
  <div id="search-results"></div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        var favoriteMeals = []

       $('.btn-search').on('click', function(e){
        e.preventDefault()
    var meal = $('#keywords').val()
    var queryUrl = 'https://www.themealdb.com/api/json/v1/1/search.php?s='+ meal + '&api-key=1'

    $.ajax({
        url: queryUrl,
        method: "GET"
    }).then(function(response){
        console.log(response)
        var newDiv = $("<div>")
        var mealImage = $('<img>')
        var favIcon = $('<button><i class="far fa-heart"></i></button>')
        var mealId = response.meals[0].idMeal
        mealImage.attr('src', response.meals[0].strMealThumb)
        favIcon.attr('data-id', mealId)
        newDiv.append(mealImage)
        newDiv.append(favIcon)
        $('#search-results').append(newDiv)

        $('.far').on('click', function(){

            favIcon.attr('class', 'fas fa-heart')
            var favId = favIcon.attr('data-id')
            if(favoriteMeals.indexOf(favId) == '-1'){
            favoriteMeals.push(favId)
            console.log(favoriteMeals)
            }
        })
        
    })
        
}) 

$('.btn-food').on('click', function(e){
        e.preventDefault()
    var place = $('#restaurant').val()
    var inputWord = $('#foodType').val()
    var ZomatoKey = '8b3fec82b5d8fb68a801540078df89dc'
    var queryUrl = 'https://developers.zomato.com/api/v2.1/search?q='+ inputWord  + '&category=' + place
    console.log(queryUrl)
    $.ajax({
        url: queryUrl,
        method: "GET",
        headers: {'user-key': '8b3fec82b5d8fb68a801540078df89dc'}
    }).then(function(response){
        console.log(response)
    //     var newDiv = $("<div>")
    //     var mealImage = $('<img>')
    //     var favIcon = $('<button><i class="far fa-heart"></i></button>')
    //     var mealId = response.meals[0].idMeal
    //     mealImage.attr('src', response.meals[0].strMealThumb)
    //     favIcon.attr('data-id', mealId)
    //     newDiv.append(mealImage)
    //     newDiv.append(favIcon)
    //     $('#search-results').append(newDiv)

    //     $('.far').on('click', function(){

    //         favIcon.attr('class', 'fas fa-heart')
    //         var favId = favIcon.attr('data-id')
    //         if(favoriteMeals.indexOf(favId) == '-1'){
    //         favoriteMeals.push(favId)
    //         console.log(favoriteMeals)
    //         }
    //     })
        
     })
        
}) 

    


    </script>
</body>
</html>